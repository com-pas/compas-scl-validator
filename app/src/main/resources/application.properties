# SPDX-FileCopyrightText: 2022 Alliander N.V.
#
# SPDX-License-Identifier: Apache-2.0

compas.validator.ocl.custom.directory = /data/ocl
compas.validator.temp.directory       = /data/temp

quarkus.http.cors                 = false
quarkus.http.root-path            = /compas-scl-validator/
quarkus.http.limits.max-body-size = 150M

quarkus.log.level = DEBUG
#quarkus.log.level = INFO
quarkus.log.category."org.lfenergy.compas.scl.validator".level = DEBUG
#quarkus.log.category."org.lfenergy.compas.scl.validator".level = INFO

# Add scanning these dependencies for scanning, also used by native compilation.
quarkus.index-dependency.scl2007b4.group-id=org.lfenergy.compas.core
quarkus.index-dependency.scl2007b4.artifact-id=commons

quarkus.index-dependency.eclipse-ocl-pivot.group-id=org.eclipse.ocl
quarkus.index-dependency.eclipse-ocl-pivot.artifact-id=org.eclipse.ocl.pivot

quarkus.index-dependency.eclipse-xtext.group-id=org.eclipse.xtext
quarkus.index-dependency.eclipse-xtext.artifact-id=org.eclipse.xtext

quarkus.index-dependency.jaxb-api.group-id=org.jboss.spec.javax.xml.bind
quarkus.index-dependency.jaxb-api.artifact-id=jboss-jaxb-api_2.3_spec

# Settings needed for native compilation of the project.
quarkus.native.resources.includes=ocl/*.*,schema/*.exsd,plugin.xml

# Dev Profile overrides.
%dev.compas.validator.ocl.custom.directory = ./src/test/data/ocl
%dev.compas.validator.temp.directory       = ./target/data/temp

%dev.quarkus.http.port      = 9093
%dev.quarkus.http.cors      = true

%dev.quarkus.log.level = DEBUG
%dev.quarkus.log.category."org.lfenergy.compas.scl.validator".level = DEBUG

# Smallrye JWT Properties (Microprofile)
smallrye.jwt.verify.key.location = ${JWT_VERIFY_KEY:http://localhost:8089/auth/realms/compas/protocol/openid-connect/certs}
mp.jwt.verify.issuer             = ${JWT_VERIFY_ISSUER:http://localhost:8089/auth/realms/compas}
mp.jwt.verify.audiences          = ${JWT_VERIFY_CLIENT_ID:scl-validator}
smallrye.jwt.path.groups         = ${JWT_GROUPS_PATH:resource_access/scl-validator/roles}

quarkus.http.auth.permission.deny-default.paths=/*
quarkus.http.auth.permission.deny-default.policy=deny

quarkus.http.auth.permission.allow-quarkus-services.paths=/compas-scl-validator/q/health/live,/compas-scl-validator/q/health/ready,/compas-scl-validator/q/openapi
quarkus.http.auth.permission.allow-quarkus-services.policy=permit

%dev.quarkus.http.auth.permission.develop-quarkus-services.paths=/compas-scl-validator/q/swagger-ui/*,/compas-scl-validator/index.html
%dev.quarkus.http.auth.permission.develop-quarkus-services.policy=permit

quarkus.http.auth.permission.common.paths=/compas-scl-validator/validate/v1/*
quarkus.http.auth.permission.common.policy=authenticated
